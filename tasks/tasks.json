{
  "tasks": [
    {
      "id": 1,
      "title": "Install and configure MSAL dependencies",
      "description": "Add Microsoft Authentication Library dependencies to the project and set up the initial configuration structure.",
      "details": "1. Install required packages:\n```bash\nnpm install @azure/msal-browser@^2.32.0 @azure/msal-react@^1.5.0\n```\n2. Create a configuration file (src/auth/msalConfig.ts) with the following structure:\n```typescript\nimport { Configuration, LogLevel } from '@azure/msal-browser';\n\nexport const msalConfig: Configuration = {\n  auth: {\n    clientId: 'c67bf91d-8b6a-494a-8b99-c7a4592e08c1',\n    authority: 'https://login.microsoftonline.com/3c7fa9ef-64e7-443c-905a-d9134ca004a9',\n    redirectUri: window.location.origin,\n  },\n  cache: {\n    cacheLocation: 'localStorage',\n    storeAuthStateInCookie: false,\n  },\n  system: {\n    loggerOptions: {\n      loggerCallback: (level, message, containsPii) => {\n        if (containsPii) return;\n        switch (level) {\n          case LogLevel.Error:\n            console.error(message);\n            break;\n          case LogLevel.Info:\n            console.info(message);\n            break;\n          case LogLevel.Verbose:\n            console.debug(message);\n            break;\n          case LogLevel.Warning:\n            console.warn(message);\n            break;\n        }\n      },\n      logLevel: LogLevel.Info,\n    },\n  },\n};\n\nexport const loginRequest = {\n  scopes: [\n    'api://c67bf91d-8b6a-494a-8b99-c7a4592e08c1/Application.Admin',\n    'api://c67bf91d-8b6a-494a-8b99-c7a4592e08c1/Application.User'\n  ],\n};\n```",
      "testStrategy": "1. Verify that all dependencies are correctly installed by checking package.json\n2. Validate the configuration file structure and values against the PRD requirements\n3. Ensure the clientId, tenantId, and scopes match the values specified in the PRD\n4. Confirm that the configuration can be imported without errors",
      "priority": "high",
      "dependencies": [],
      "status": "done",
      "subtasks": []
    },
    {
      "id": 2,
      "title": "Create MSAL Authentication Context",
      "description": "Implement the MSALAuthContext to manage authentication state and provide methods for login, logout, and token acquisition.",
      "details": "Create a new authentication context (src/auth/MSALAuthContext.tsx) that will handle MSAL authentication:\n\n```typescript\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { PublicClientApplication, AuthenticationResult, AccountInfo, InteractionRequiredAuthError, InteractionStatus } from '@azure/msal-browser';\nimport { msalConfig, loginRequest } from './msalConfig';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  roles: string[];\n  accessToken: string;\n}\n\ninterface MSALAuthContextType {\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  user: User | null;\n  error: string | null;\n  login: () => Promise<void>;\n  logout: () => Promise<void>;\n  acquireToken: () => Promise<string | null>;\n}\n\nconst MSALAuthContext = createContext<MSALAuthContextType | undefined>(undefined);\n\nconst msalInstance = new PublicClientApplication(msalConfig);\n\nexport const MSALAuthProvider = ({ children }: { children: ReactNode }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [user, setUser] = useState<User | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        // Handle redirect promise\n        await msalInstance.handleRedirectPromise();\n        \n        // Check if user is already signed in\n        const accounts = msalInstance.getAllAccounts();\n        if (accounts.length > 0) {\n          msalInstance.setActiveAccount(accounts[0]);\n          await handleSignedInAccount(accounts[0]);\n        }\n      } catch (err) {\n        console.error('MSAL Initialization Error', err);\n        setError('Failed to initialize authentication');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []);\n\n  const handleSignedInAccount = async (account: AccountInfo) => {\n    try {\n      const tokenResponse = await msalInstance.acquireTokenSilent({\n        ...loginRequest,\n        account\n      });\n      \n      const user = mapAccountToUser(account, tokenResponse);\n      setUser(user);\n      setIsAuthenticated(true);\n      setError(null);\n    } catch (err) {\n      if (err instanceof InteractionRequiredAuthError) {\n        // Silent token acquisition failed, user interaction required\n        setIsAuthenticated(false);\n        setUser(null);\n      } else {\n        console.error('Token acquisition error', err);\n        setError('Failed to acquire authentication token');\n      }\n    }\n  };\n\n  const mapAccountToUser = (account: AccountInfo, tokenResponse: AuthenticationResult): User => {\n    // Extract roles from ID token claims\n    const idTokenClaims = tokenResponse.idTokenClaims as any;\n    const roles = idTokenClaims?.roles || [];\n    \n    return {\n      id: account.homeAccountId,\n      name: account.name || '',\n      email: account.username,\n      roles,\n      accessToken: tokenResponse.accessToken\n    };\n  };\n\n  const login = async (): Promise<void> => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      // Attempt login with popup as primary method\n      const response = await msalInstance.loginPopup(loginRequest);\n      await handleSignedInAccount(response.account);\n    } catch (err: any) {\n      console.error('Login error', err);\n      if (err.name === 'PopupBlockedError') {\n        // Fallback to redirect if popup is blocked\n        msalInstance.loginRedirect(loginRequest);\n      } else {\n        setError(err.message || 'Failed to sign in');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = async (): Promise<void> => {\n    try {\n      await msalInstance.logoutPopup();\n      setIsAuthenticated(false);\n      setUser(null);\n    } catch (err) {\n      console.error('Logout error', err);\n      // Even if logout fails, clear local state\n      setIsAuthenticated(false);\n      setUser(null);\n    }\n  };\n\n  const acquireToken = async (): Promise<string | null> => {\n    try {\n      const account = msalInstance.getActiveAccount();\n      if (!account) {\n        throw new Error('No active account');\n      }\n      \n      const response = await msalInstance.acquireTokenSilent({\n        ...loginRequest,\n        account\n      });\n      \n      // Update user with new token\n      setUser(prev => prev ? { ...prev, accessToken: response.accessToken } : null);\n      return response.accessToken;\n    } catch (err) {\n      if (err instanceof InteractionRequiredAuthError) {\n        try {\n          // Silent token acquisition failed, try interactive method\n          const response = await msalInstance.acquireTokenPopup(loginRequest);\n          setUser(prev => prev ? { ...prev, accessToken: response.accessToken } : null);\n          return response.accessToken;\n        } catch (interactiveErr) {\n          console.error('Interactive token acquisition failed', interactiveErr);\n          setError('Authentication session expired. Please sign in again.');\n          setIsAuthenticated(false);\n          setUser(null);\n          return null;\n        }\n      } else {\n        console.error('Token acquisition error', err);\n        setError('Failed to acquire authentication token');\n        return null;\n      }\n    }\n  };\n\n  const contextValue: MSALAuthContextType = {\n    isAuthenticated,\n    isLoading,\n    user,\n    error,\n    login,\n    logout,\n    acquireToken\n  };\n\n  return (\n    <MSALAuthContext.Provider value={contextValue}>\n      {children}\n    </MSALAuthContext.Provider>\n  );\n};\n\nexport const useMSALAuth = (): MSALAuthContextType => {\n  const context = useContext(MSALAuthContext);\n  if (context === undefined) {\n    throw new Error('useMSALAuth must be used within an MSALAuthProvider');\n  }\n  return context;\n};\n```",
      "testStrategy": "1. Create unit tests to verify the context initialization\n2. Test the login, logout, and acquireToken methods with mocked MSAL responses\n3. Verify that user state is correctly updated after authentication\n4. Test error handling for various authentication scenarios\n5. Verify that the context provides the expected interface",
      "priority": "high",
      "dependencies": [
        1
      ],
      "status": "done",
      "subtasks": [
        {
          "id": 1,
          "title": "Create Core Authentication Context Structure",
          "description": "Set up the basic MSAL Authentication Context structure with provider and hook patterns",
          "dependencies": [],
          "details": "1. Create an AuthContext.tsx file\n2. Define the AuthContextState interface with properties: account, inProgress, isAuthenticated, error\n3. Create the AuthContext using React.createContext\n4. Implement the AuthProvider component that will wrap the application\n5. Set up the MSAL instance configuration with proper authority and redirect URI\n6. Initialize the PublicClientApplication from @azure/msal-browser\n7. Create and export a useAuth hook for consuming components\n8. Add proper TypeScript types for all components and functions\n9. Test the context initialization without authentication logic",
          "status": "done"
        },
        {
          "id": 2,
          "title": "Implement Authentication State Management",
          "description": "Add state management logic to track authentication status, user account, and error handling",
          "dependencies": [
            1
          ],
          "details": "1. Add useState hooks for tracking: account, inProgress, isAuthenticated, error\n2. Implement useEffect to check for existing accounts on component mount\n3. Create handleRedirectPromise function to handle redirect responses\n4. Add event callbacks for MSAL events (loginSuccess, loginFailure, etc.)\n5. Implement a function to determine if a user is authenticated\n6. Create error handling utilities for authentication errors\n7. Add state update functions that maintain immutability\n8. Implement proper cleanup in useEffect to prevent memory leaks\n9. Test state updates with mock authentication events",
          "status": "done"
        },
        {
          "id": 3,
          "title": "Implement Login Functionality",
          "description": "Create login methods supporting both popup and redirect flows with proper error handling",
          "dependencies": [
            1,
            2
          ],
          "details": "1. Implement loginPopup function using MSAL's loginPopup method\n2. Implement loginRedirect function using MSAL's loginRedirect method\n3. Create a login configuration object with proper scopes\n4. Add error handling for failed login attempts\n5. Update authentication state after successful login\n6. Implement silent login functionality for session persistence\n7. Add login hint support for improved user experience\n8. Create test cases for successful login\n9. Create test cases for failed login scenarios\n10. Document the login API for consuming components",
          "status": "done"
        },
        {
          "id": 4,
          "title": "Implement Logout Functionality",
          "description": "Create logout methods with proper state cleanup and server session termination",
          "dependencies": [
            1,
            2,
            3
          ],
          "details": "1. Implement logout function using MSAL's logout method\n2. Add support for both popup and redirect logout flows\n3. Create proper state cleanup after logout\n4. Implement postLogoutRedirectUri configuration\n5. Add confirmation dialog option before logout\n6. Handle edge cases like logout during in-progress operations\n7. Create test cases for successful logout\n8. Create test cases for failed logout scenarios\n9. Document the logout API for consuming components\n10. Ensure all cached tokens are properly cleared",
          "status": "done"
        },
        {
          "id": 5,
          "title": "Implement Token Acquisition and Management",
          "description": "Add token acquisition, caching, and refresh functionality with proper error handling",
          "dependencies": [
            1,
            2,
            3
          ],
          "details": "1. Implement acquireToken function using MSAL's acquireTokenSilent\n2. Add fallback to interactive methods when silent acquisition fails\n3. Create token caching mechanism for performance\n4. Implement token refresh logic before expiration\n5. Add proper scopes management for different API endpoints\n6. Create utility to check if token is expired\n7. Implement token acquisition queue to prevent race conditions\n8. Add comprehensive error handling for token acquisition failures\n9. Create test cases for successful token acquisition\n10. Create test cases for token refresh scenarios\n11. Document the token API for consuming components",
          "status": "done"
        }
      ]
    },
    {
      "id": 3,
      "title": "Implement MSAL React Provider Integration",
      "description": "Integrate the MSAL React provider with the application to enable MSAL authentication throughout the app.",
      "details": "Create a wrapper component that integrates the MSAL React provider with our custom auth context:\n\n```typescript\n// src/auth/MSALProvider.tsx\nimport { ReactNode } from 'react';\nimport { MsalProvider } from '@azure/msal-react';\nimport { PublicClientApplication } from '@azure/msal-browser';\nimport { msalConfig } from './msalConfig';\nimport { MSALAuthProvider } from './MSALAuthContext';\n\ninterface MSALProviderWrapperProps {\n  children: ReactNode;\n}\n\n// Initialize MSAL instance\nconst msalInstance = new PublicClientApplication(msalConfig);\n\nexport const MSALProviderWrapper = ({ children }: MSALProviderWrapperProps) => {\n  return (\n    <MsalProvider instance={msalInstance}>\n      <MSALAuthProvider>\n        {children}\n      </MSALAuthProvider>\n    </MsalProvider>\n  );\n};\n```\n\nUpdate the application's entry point to use the MSAL provider:\n\n```typescript\n// src/index.tsx or App.tsx\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport { MSALProviderWrapper } from './auth/MSALProvider';\n\nconst root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);\n\nroot.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <MSALProviderWrapper>\n        <App />\n      </MSALProviderWrapper>\n    </BrowserRouter>\n  </React.StrictMode>\n);\n```",
      "testStrategy": "1. Verify that the MSAL provider is correctly initialized\n2. Test that the provider wrapper renders without errors\n3. Check that child components can access the MSAL context\n4. Verify that the application can initialize with the MSAL provider in place\n5. Test integration with React Router for protected routes",
      "priority": "high",
      "dependencies": [
        1,
        2
      ],
      "status": "done",
      "subtasks": [
        {
          "id": 1,
          "title": "Create MSAL Provider Wrapper Component",
          "description": "Develop a wrapper component that integrates the MSAL React Provider with the custom authentication context",
          "dependencies": [],
          "details": "1. Create a new component file (e.g., MsalProviderWrapper.tsx)\n2. Import necessary MSAL dependencies (MsalProvider, PublicClientApplication)\n3. Import the custom AuthContext/Provider\n4. Configure MSAL instance with appropriate authentication parameters (authority, clientId, redirectUri)\n5. Create the wrapper component that nests the AuthProvider inside the MsalProvider\n6. Implement proper prop passing between providers\n7. Add error handling for MSAL initialization failures\n8. Document the component with JSDoc comments",
          "status": "done"
        },
        {
          "id": 2,
          "title": "Integrate MSAL Provider in Application Entry Point",
          "description": "Update the application's main entry point to use the MSAL Provider wrapper component",
          "dependencies": [
            1
          ],
          "details": "1. Modify the main application file (e.g., index.tsx or App.tsx)\n2. Import the MsalProviderWrapper component\n3. Replace the existing AuthProvider implementation with the new wrapper\n4. Ensure all existing props and children are properly passed through\n5. Update any imports or references that might be affected\n6. Verify that the application structure remains intact\n7. Add appropriate comments explaining the MSAL integration\n8. Check for any potential circular dependencies",
          "status": "done"
        },
        {
          "id": 3,
          "title": "Test MSAL Integration and Authentication Flow",
          "description": "Verify that the MSAL integration works correctly by testing the authentication flow",
          "dependencies": [
            1,
            2
          ],
          "details": "1. Create test cases for login, logout, and token acquisition\n2. Test silent authentication flow for returning users\n3. Verify redirect handling after authentication\n4. Test error scenarios (e.g., expired tokens, network failures)\n5. Verify that protected routes require authentication\n6. Test token caching and refresh mechanisms\n7. Validate that user context is properly populated after authentication\n8. Create documentation for the authentication flow\n9. Verify browser compatibility (Chrome, Firefox, Safari, Edge)\n10. Test on different devices (desktop, mobile)",
          "status": "done"
        }
      ]
    },
    {
      "id": 4,
      "title": "Create Microsoft Login Button Component",
      "description": "Develop a reusable Microsoft login button component that follows Microsoft's branding guidelines and handles the authentication flow.",
      "details": "Create a styled Microsoft login button component:\n\n```typescript\n// src/components/auth/MicrosoftLoginButton.tsx\nimport React from 'react';\nimport { useMSALAuth } from '../../auth/MSALAuthContext';\n\ninterface MicrosoftLoginButtonProps {\n  className?: string;\n  onLoginSuccess?: () => void;\n  onLoginError?: (error: string) => void;\n}\n\nconst MicrosoftLoginButton: React.FC<MicrosoftLoginButtonProps> = ({\n  className = '',\n  onLoginSuccess,\n  onLoginError\n}) => {\n  const { login, isLoading } = useMSALAuth();\n\n  const handleLogin = async () => {\n    try {\n      await login();\n      if (onLoginSuccess) onLoginSuccess();\n    } catch (error: any) {\n      if (onLoginError) onLoginError(error.message || 'Login failed');\n    }\n  };\n\n  return (\n    <button\n      type=\"button\"\n      className={`microsoft-login-button ${className}`}\n      onClick={handleLogin}\n      disabled={isLoading}\n      aria-label=\"Sign in with Microsoft\"\n    >\n      <span className=\"microsoft-icon\">\n        {/* Microsoft logo SVG */}\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"21\" height=\"21\" viewBox=\"0 0 21 21\">\n          <rect x=\"1\" y=\"1\" width=\"9\" height=\"9\" fill=\"#f25022\" />\n          <rect x=\"1\" y=\"11\" width=\"9\" height=\"9\" fill=\"#00a4ef\" />\n          <rect x=\"11\" y=\"1\" width=\"9\" height=\"9\" fill=\"#7fba00\" />\n          <rect x=\"11\" y=\"11\" width=\"9\" height=\"9\" fill=\"#ffb900\" />\n        </svg>\n      </span>\n      <span className=\"button-text\">\n        {isLoading ? 'Signing in...' : 'Sign in with Microsoft'}\n      </span>\n    </button>\n  );\n};\n\nexport default MicrosoftLoginButton;\n```\n\nAdd the corresponding CSS:\n\n```css\n/* src/components/auth/MicrosoftLoginButton.css */\n.microsoft-login-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 10px 16px;\n  background-color: #ffffff;\n  color: #5e5e5e;\n  border: 1px solid #8c8c8c;\n  border-radius: 4px;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  min-width: 240px;\n  height: 41px;\n}\n\n.microsoft-login-button:hover {\n  background-color: #f3f3f3;\n}\n\n.microsoft-login-button:focus {\n  outline: none;\n  box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.5);\n}\n\n.microsoft-login-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n\n.microsoft-icon {\n  margin-right: 12px;\n  display: flex;\n  align-items: center;\n}\n\n.button-text {\n  flex: 1;\n  text-align: center;\n}\n```",
      "testStrategy": "1. Verify that the button renders correctly with proper Microsoft branding\n2. Test the button's click handler to ensure it triggers the login function\n3. Verify loading state is displayed during authentication\n4. Test that success and error callbacks are invoked appropriately\n5. Verify accessibility features (keyboard navigation, ARIA attributes)\n6. Test the button's appearance across different screen sizes",
      "priority": "medium",
      "dependencies": [
        2,
        3
      ],
      "status": "done",
      "subtasks": []
    },
    {
      "id": 5,
      "title": "Create New Login Page with MSAL Authentication",
      "description": "Design and implement a new login page that incorporates the Microsoft login button and handles authentication flows.",
      "details": "Create a new login page component that uses the Microsoft login button:\n\n```typescript\n// src/pages/LoginPage.tsx\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useMSALAuth } from '../auth/MSALAuthContext';\nimport MicrosoftLoginButton from '../components/auth/MicrosoftLoginButton';\nimport './LoginPage.css';\n\nconst LoginPage: React.FC = () => {\n  const { isAuthenticated, isLoading, error: authError } = useMSALAuth();\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  // Get the return URL from location state or default to home\n  const from = (location.state as any)?.from?.pathname || '/';\n\n  useEffect(() => {\n    // If user is already authenticated, redirect to the intended destination\n    if (isAuthenticated && !isLoading) {\n      navigate(from, { replace: true });\n    }\n  }, [isAuthenticated, isLoading, navigate, from]);\n\n  useEffect(() => {\n    // Update local error state when auth context error changes\n    if (authError) {\n      setError(authError);\n    }\n  }, [authError]);\n\n  const handleLoginSuccess = () => {\n    setError(null);\n    // Navigation will be handled by the useEffect above\n  };\n\n  const handleLoginError = (errorMessage: string) => {\n    setError(errorMessage);\n  };\n\n  return (\n    <div className=\"login-page\">\n      <div className=\"login-container\">\n        <div className=\"login-header\">\n          <img src=\"/logo.png\" alt=\"FourSPM Logo\" className=\"logo\" />\n          <h1>Welcome to FourSPM</h1>\n        </div>\n        \n        <div className=\"login-form\">\n          {isLoading ? (\n            <div className=\"loading-indicator\">\n              <span className=\"spinner\"></span>\n              <p>Authenticating...</p>\n            </div>\n          ) : (\n            <>\n              <p className=\"login-instruction\">\n                Sign in with your Microsoft account to access FourSPM.\n              </p>\n              \n              <MicrosoftLoginButton \n                onLoginSuccess={handleLoginSuccess}\n                onLoginError={handleLoginError}\n                className=\"login-button\"\n              />\n              \n              {error && (\n                <div className=\"error-message\">\n                  <p>{error}</p>\n                  <p className=\"error-help\">\n                    If you continue to experience issues, please contact support.\n                  </p>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n        \n        <div className=\"login-footer\">\n          <p>&copy; {new Date().getFullYear()} FourSPM. All rights reserved.</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n```\n\nAdd the corresponding CSS:\n\n```css\n/* src/pages/LoginPage.css */\n.login-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.login-container {\n  width: 100%;\n  max-width: 450px;\n  padding: 40px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.logo {\n  width: 120px;\n  margin-bottom: 20px;\n}\n\n.login-header h1 {\n  font-size: 24px;\n  color: #333;\n  margin: 0;\n}\n\n.login-form {\n  margin-bottom: 30px;\n}\n\n.login-instruction {\n  text-align: center;\n  margin-bottom: 20px;\n  color: #555;\n}\n\n.login-button {\n  width: 100%;\n  margin-bottom: 20px;\n}\n\n.error-message {\n  padding: 12px;\n  background-color: #fdeded;\n  border: 1px solid #f5c2c7;\n  border-radius: 4px;\n  color: #842029;\n  margin-top: 20px;\n}\n\n.error-help {\n  font-size: 14px;\n  margin-top: 8px;\n  margin-bottom: 0;\n}\n\n.loading-indicator {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n}\n\n.spinner {\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  border-radius: 50%;\n  border-top: 4px solid #0078d4;\n  width: 30px;\n  height: 30px;\n  animation: spin 1s linear infinite;\n  margin-bottom: 15px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.login-footer {\n  text-align: center;\n  font-size: 14px;\n  color: #777;\n}\n\n/* Responsive adjustments */\n@media (max-width: 480px) {\n  .login-container {\n    padding: 30px 20px;\n    max-width: 100%;\n    margin: 0 15px;\n  }\n}\n```",
      "testStrategy": "1. Verify that the login page renders correctly with all UI elements\n2. Test that the Microsoft login button is displayed and functional\n3. Verify error messages are displayed when authentication fails\n4. Test loading states during authentication\n5. Verify redirection to the intended page after successful login\n6. Test responsive design on different screen sizes\n7. Verify accessibility compliance using automated tools",
      "priority": "high",
      "dependencies": [
        3,
        4
      ],
      "status": "done",
      "subtasks": [
        {
          "id": 1,
          "title": "Implement Login Page Layout and Design",
          "description": "Create the visual structure and styling for the login page following the application design system",
          "dependencies": [],
          "details": "1. Create a new React component for the login page\n2. Implement the form with username/email and password fields\n3. Add a submit button and 'forgot password' link\n4. Style the page according to design guidelines using CSS/SCSS\n5. Include the company logo and any welcome text\n6. Add form validation for input fields (required fields, email format)\n7. Ensure proper tab navigation between form elements\n\nAcceptance Criteria:\n- Page matches the approved design mockups\n- Form elements are properly aligned and styled\n- Visual feedback is provided for input focus states\n- Form layout maintains integrity at various screen sizes",
          "status": "done"
        },
        {
          "id": 2,
          "title": "Implement Authentication Flow Integration",
          "description": "Connect the login form to the authentication service and handle user session management",
          "dependencies": [
            1
          ],
          "details": "1. Create form submission handler to capture user credentials\n2. Implement API service to communicate with authentication endpoints\n3. Add state management for login process (loading, success, failure states)\n4. Implement token storage in localStorage/sessionStorage\n5. Set up redirect to dashboard/home page after successful login\n6. Integrate with React Router for navigation\n7. Implement 'Remember me' functionality if required\n\nAcceptance Criteria:\n- Successful authentication redirects to the appropriate page\n- Authentication tokens are properly stored\n- User session persists through page refreshes if 'Remember me' is selected\n- Loading states are properly displayed during authentication\n- API calls are properly structured with error handling",
          "status": "done"
        },
        {
          "id": 3,
          "title": "Implement Error Handling and User Feedback",
          "description": "Add comprehensive error handling for authentication failures and input validation with clear user feedback",
          "dependencies": [
            2
          ],
          "details": "1. Implement form validation error messages\n2. Create error handling for authentication failures (wrong credentials, account locked, etc.)\n3. Add visual indicators for validation errors (red borders, error icons)\n4. Implement toast/notification system for system-level errors\n5. Add accessibility attributes for error messages (aria-invalid, aria-describedby)\n6. Create retry logic for failed network requests\n7. Implement rate limiting protection for multiple failed attempts\n\nAcceptance Criteria:\n- All error states have clear, user-friendly messages\n- Form validation errors appear inline next to the relevant fields\n- Authentication errors are displayed prominently\n- Error messages are accessible to screen readers\n- Network errors are handled gracefully with retry options\n- Security measures prevent brute force attempts",
          "status": "done"
        },
        {
          "id": 4,
          "title": "Implement Responsive Design and Cross-Browser Testing",
          "description": "Ensure the login page works correctly across all device sizes and major browsers",
          "dependencies": [
            1,
            3
          ],
          "details": "1. Implement responsive breakpoints for mobile, tablet, and desktop views\n2. Add media queries for different screen sizes\n3. Test and fix layout on iOS and Android devices\n4. Ensure functionality in Chrome, Firefox, Safari, and Edge browsers\n5. Optimize touch targets for mobile users\n6. Test and fix keyboard navigation for accessibility\n7. Implement automated tests for critical login functionality\n\nAcceptance Criteria:\n- Page renders correctly from 320px to 1920px width\n- All functionality works on touch devices\n- Form is usable on all major browsers (Chrome, Firefox, Safari, Edge)\n- Login process works with keyboard navigation only\n- Automated tests pass for core functionality\n- Page load time is optimized for mobile connections",
          "status": "done"
        }
      ]
    },
    {
      "id": 7,
      "title": "Update API Service for MSAL Token Integration",
      "description": "Modify the API service to use MSAL tokens for authentication and handle token acquisition and renewal.",
      "details": "Create or update the API service to use MSAL tokens:\n\n```typescript\n// src/services/apiService.ts\nimport axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios';\nimport { msalInstance } from '../auth/MSALProvider';\nimport { loginRequest } from '../auth/msalConfig';\n\nclass ApiService {\n  private api: AxiosInstance;\n  private isAcquiringToken: boolean = false;\n  private tokenAcquisitionPromise: Promise<string | null> | null = null;\n\n  constructor() {\n    this.api = axios.create({\n      baseURL: process.env.REACT_APP_API_URL || '/api',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    this.setupInterceptors();\n  }\n\n  private setupInterceptors(): void {\n    // Request interceptor to add auth token\n    this.api.interceptors.request.use(\n      async (config) => {\n        const token = await this.getAccessToken();\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n      },\n      (error) => Promise.reject(error)\n    );\n\n    // Response interceptor to handle errors\n    this.api.interceptors.response.use(\n      (response) => response,\n      async (error: AxiosError) => {\n        const originalRequest = error.config as AxiosRequestConfig & { _retry?: boolean };\n        \n        // If error is 401 Unauthorized and we haven't retried yet\n        if (error.response?.status === 401 && !originalRequest._retry) {\n          originalRequest._retry = true;\n          \n          try {\n            // Force token refresh\n            const token = await this.getAccessToken(true);\n            if (token) {\n              // Update the authorization header\n              this.api.defaults.headers.common.Authorization = `Bearer ${token}`;\n              if (originalRequest.headers) {\n                originalRequest.headers.Authorization = `Bearer ${token}`;\n              }\n              // Retry the request\n              return this.api(originalRequest);\n            }\n          } catch (refreshError) {\n            console.error('Token refresh failed', refreshError);\n            // Redirect to login if token refresh fails\n            window.location.href = '/login';\n            return Promise.reject(refreshError);\n          }\n        }\n        \n        return Promise.reject(error);\n      }\n    );\n  }\n\n  private async getAccessToken(forceRefresh: boolean = false): Promise<string | null> {\n    // If we're already acquiring a token, return the existing promise\n    if (this.isAcquiringToken && this.tokenAcquisitionPromise) {\n      return this.tokenAcquisitionPromise;\n    }\n\n    this.isAcquiringToken = true;\n    this.tokenAcquisitionPromise = (async () => {\n      try {\n        const accounts = msalInstance.getAllAccounts();\n        if (accounts.length === 0) {\n          return null;\n        }\n\n        const account = accounts[0];\n        let tokenResponse;\n\n        try {\n          // Try silent token acquisition first\n          tokenResponse = await msalInstance.acquireTokenSilent({\n            ...loginRequest,\n            account,\n            forceRefresh\n          });\n        } catch (error: any) {\n          // If silent acquisition fails, try interactive\n          console.warn('Silent token acquisition failed', error);\n          if (error.name === 'InteractionRequiredAuthError') {\n            try {\n              tokenResponse = await msalInstance.acquireTokenPopup(loginRequest);\n            } catch (interactiveError) {\n              console.error('Interactive token acquisition failed', interactiveError);\n              throw interactiveError;\n            }\n          } else {\n            throw error;\n          }\n        }\n\n        return tokenResponse.accessToken;\n      } catch (error) {\n        console.error('Failed to acquire token', error);\n        return null;\n      } finally {\n        this.isAcquiringToken = false;\n        this.tokenAcquisitionPromise = null;\n      }\n    })();\n\n    return this.tokenAcquisitionPromise;\n  }\n\n  // Generic request method\n  public async request<T>(config: AxiosRequestConfig): Promise<T> {\n    try {\n      const response: AxiosResponse<T> = await this.api(config);\n      return response.data;\n    } catch (error) {\n      console.error('API request failed', error);\n      throw error;\n    }\n  }\n\n  // Convenience methods for common HTTP verbs\n  public async get<T>(url: string, config?: AxiosRequestConfig): Promise<T> {\n    return this.request<T>({ ...config, method: 'GET', url });\n  }\n\n  public async post<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\n    return this.request<T>({ ...config, method: 'POST', url, data });\n  }\n\n  public async put<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\n    return this.request<T>({ ...config, method: 'PUT', url, data });\n  }\n\n  public async delete<T>(url: string, config?: AxiosRequestConfig): Promise<T> {\n    return this.request<T>({ ...config, method: 'DELETE', url });\n  }\n}\n\n// Create a singleton instance\nconst apiService = new ApiService();\nexport default apiService;\n```",
      "testStrategy": "1. Test that API requests include the authentication token in the headers\n2. Verify token acquisition works correctly for authenticated users\n3. Test token refresh when a 401 error is received\n4. Verify error handling for various API response scenarios\n5. Test the retry mechanism for failed requests due to token expiration\n6. Mock API responses to test different error conditions\n7. Verify that unauthenticated users are redirected to login",
      "priority": "high",
      "dependencies": [
        2,
        3
      ],
      "status": "pending",
      "subtasks": [
        {
          "id": 1,
          "title": "Design API Service Class Structure",
          "description": "Create a modular and extensible service class structure for the API client",
          "dependencies": [],
          "details": "1. Create a base ApiService class that handles common functionality\n2. Design interfaces for request/response types\n3. Implement configuration options (base URL, timeout, headers)\n4. Create service factory for generating API service instances\n5. Document class relationships and responsibilities\n6. Test cases: Verify service instantiation with different configs, validate inheritance structure works correctly",
          "status": "pending"
        },
        {
          "id": 2,
          "title": "Implement Token Acquisition Logic",
          "description": "Develop the authentication mechanism to acquire initial access tokens",
          "dependencies": [
            1
          ],
          "details": "1. Create AuthService class for token management\n2. Implement login/authentication endpoint integration\n3. Store tokens securely (access token, refresh token, expiration)\n4. Add token validation methods\n5. Implement token storage persistence\n6. Test cases: Successful token acquisition, handling invalid credentials, token validation checks, persistence across sessions",
          "status": "pending"
        },
        {
          "id": 3,
          "title": "Build Request Interceptors",
          "description": "Create interceptors that process outgoing API requests",
          "dependencies": [
            1,
            2
          ],
          "details": "1. Implement request interceptor mechanism\n2. Add authentication header injection\n3. Create request logging functionality\n4. Add request timestamp tracking\n5. Implement request retry configuration\n6. Test cases: Verify auth headers are added correctly, test logging output, confirm retry behavior works",
          "status": "pending"
        },
        {
          "id": 4,
          "title": "Develop Response Interceptors with Token Refresh",
          "description": "Create interceptors for API responses with automatic token refresh capability",
          "dependencies": [
            2,
            3
          ],
          "details": "1. Implement response interceptor mechanism\n2. Add token expiration detection\n3. Create token refresh logic\n4. Implement request retry after token refresh\n5. Add concurrency handling for multiple requests during refresh\n6. Test cases: Expired token scenarios, successful refresh and retry, multiple concurrent requests during refresh",
          "status": "pending"
        },
        {
          "id": 5,
          "title": "Implement Comprehensive Error Handling",
          "description": "Create robust error handling for all API service operations",
          "dependencies": [
            3,
            4
          ],
          "details": "1. Design custom error classes for different error types\n2. Implement global error handler\n3. Add specific handlers for auth errors, network errors, and server errors\n4. Create user-friendly error messages\n5. Implement error logging and reporting\n6. Test cases: Authentication failures, network timeouts, server errors, malformed responses, retry exhaustion scenarios",
          "status": "pending"
        }
      ]
    },
    {
      "id": 8,
      "title": "Implement User Profile Component",
      "description": "Create a user profile component that displays information from the Microsoft account and handles user-specific actions.",
      "details": "Create a user profile component that displays user information from MSAL:\n\n```typescript\n// src/components/auth/UserProfile.tsx\nimport React from 'react';\nimport { useMSALAuth } from '../../auth/MSALAuthContext';\nimport './UserProfile.css';\n\ninterface UserProfileProps {\n  showLogout?: boolean;\n  className?: string;\n}\n\nconst UserProfile: React.FC<UserProfileProps> = ({ \n  showLogout = true,\n  className = ''\n}) => {\n  const { user, logout, isLoading } = useMSALAuth();\n\n  if (isLoading) {\n    return <div className=\"user-profile-loading\">Loading...</div>;\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  // Generate initials for avatar fallback\n  const getInitials = () => {\n    if (!user.name) return '?';\n    \n    const nameParts = user.name.split(' ');\n    if (nameParts.length === 1) return nameParts[0].charAt(0).toUpperCase();\n    \n    return (\n      nameParts[0].charAt(0).toUpperCase() + \n      nameParts[nameParts.length - 1].charAt(0).toUpperCase()\n    );\n  };\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  return (\n    <div className={`user-profile ${className}`}>\n      <div className=\"user-avatar\">\n        {/* If we had a photo URL from Microsoft Graph, we could use it here */}\n        <div className=\"avatar-initials\">{getInitials()}</div>\n      </div>\n      \n      <div className=\"user-info\">\n        <div className=\"user-name\">{user.name}</div>\n        <div className=\"user-email\">{user.email}</div>\n      </div>\n      \n      {showLogout && (\n        <button \n          className=\"logout-button\" \n          onClick={handleLogout}\n          aria-label=\"Sign out\"\n        >\n          Sign out\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default UserProfile;\n```\n\nAdd the corresponding CSS:\n\n```css\n/* src/components/auth/UserProfile.css */\n.user-profile {\n  display: flex;\n  align-items: center;\n  padding: 8px;\n  border-radius: 4px;\n}\n\n.user-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  overflow: hidden;\n  margin-right: 12px;\n  background-color: #0078d4;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.avatar-initials {\n  color: white;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.user-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.user-name {\n  font-weight: 600;\n  font-size: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.user-email {\n  font-size: 12px;\n  color: #666;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.logout-button {\n  background: none;\n  border: none;\n  color: #0078d4;\n  font-size: 14px;\n  cursor: pointer;\n  padding: 4px 8px;\n  margin-left: 8px;\n  border-radius: 4px;\n}\n\n.logout-button:hover {\n  background-color: rgba(0, 120, 212, 0.1);\n  text-decoration: underline;\n}\n\n.user-profile-loading {\n  font-size: 14px;\n  color: #666;\n  padding: 8px;\n}\n\n/* Responsive adjustments */\n@media (max-width: 480px) {\n  .user-info {\n    max-width: 150px;\n  }\n}\n```",
      "testStrategy": "1. Verify that the component correctly displays user information\n2. Test the logout functionality\n3. Verify that the component handles loading states correctly\n4. Test the component with different user data formats\n5. Verify that the initials generation works correctly for different name formats\n6. Test responsive behavior on different screen sizes\n7. Verify accessibility compliance",
      "priority": "medium",
      "dependencies": [
        2,
        3
      ],
      "status": "done",
      "subtasks": [
        {
          "id": 1,
          "title": "Create User Profile Component Structure",
          "description": "Set up the basic structure of the User Profile component with proper layout and responsive design",
          "dependencies": [],
          "details": "Create a new React component called UserProfile. Implement a container div with appropriate styling for different screen sizes. Include placeholders for user avatar, name, email, and logout button. Use CSS modules or styled-components for styling. Ensure the component has proper TypeScript interfaces for props including user information from MSAL. Add accessibility attributes like aria-labels and proper tab navigation. The component should collapse gracefully on smaller screens.",
          "status": "done"
        },
        {
          "id": 2,
          "title": "Implement User Information Display",
          "description": "Display user information from MSAL including name, email, and generate/display user avatar",
          "dependencies": [
            1
          ],
          "details": "Connect the component to MSAL context to retrieve authenticated user data. Display user's display name and email address with appropriate typography. Implement an avatar component that either uses the user's profile picture if available or generates initials-based avatar with a background color. Add hover states for interactive elements. Ensure text has sufficient contrast ratio (minimum 4.5:1) for accessibility. Implement skeleton loading state for when user data is being fetched. Add proper error handling for cases when user data cannot be retrieved.",
          "status": "done"
        },
        {
          "id": 3,
          "title": "Add Logout Functionality",
          "description": "Implement logout button with confirmation dialog and proper MSAL integration",
          "dependencies": [
            2
          ],
          "details": "Add a logout button with appropriate styling and icon. Implement a confirmation dialog that appears when logout is clicked. Connect logout action to MSAL's signOut method. Add appropriate loading state during logout process. Ensure keyboard accessibility for the logout flow (can be triggered with Enter key). Add appropriate aria-labels and roles for screen readers. Implement proper focus management after logout dialog appears. Add success/error notifications for logout action. Test the logout flow thoroughly with different MSAL configurations.",
          "status": "done"
        }
      ]
    },
    {
      "id": 12,
      "title": "Implement Error Handling and User Feedback",
      "description": "Create a comprehensive error handling system for authentication-related errors with clear user feedback.",
      "details": "Create an authentication error handling utility:\n\n```typescript\n// src/auth/authErrorHandler.ts\nimport { AuthError, InteractionRequiredAuthError } from '@azure/msal-browser';\n\nexport enum AuthErrorType {\n  Interaction = 'interaction',\n  Network = 'network',\n  Permissions = 'permissions',\n  Timeout = 'timeout',\n  UserCancelled = 'userCancelled',\n  Generic = 'generic'\n}\n\nexport interface AuthErrorInfo {\n  type: AuthErrorType;\n  message: string;\n  technicalDetails?: string;\n  actionRequired?: string;\n}\n\nexport const handleAuthError = (error: any): AuthErrorInfo => {\n  // Default error info\n  let errorInfo: AuthErrorInfo = {\n    type: AuthErrorType.Generic,\n    message: 'An authentication error occurred.',\n    technicalDetails: error?.message || 'Unknown error',\n    actionRequired: 'Please try again or contact support if the problem persists.'\n  };\n  \n  // Handle MSAL-specific errors\n  if (error instanceof AuthError) {\n    // User cancelled the login\n    if (error.name === 'UserCancelledError') {\n      errorInfo = {\n        type: AuthErrorType.UserCancelled,\n        message: 'Sign-in was cancelled.',\n        technicalDetails: error.message,\n        actionRequired: 'Please complete the sign-in process to access the application.'\n      };\n    }\n    // Popup blocked\n    else if (error.name === 'PopupBlockedError') {\n      errorInfo = {\n        type: AuthErrorType.Interaction,\n        message: 'The sign-in popup was blocked by your browser.',\n        technicalDetails: error.message,\n        actionRequired: 'Please allow popups for this site and try again.'\n      };\n    }\n    // Interaction required\n    else if (error instanceof InteractionRequiredAuthError) {\n      errorInfo = {\n        type: AuthErrorType.Interaction,\n        message: 'Your session has expired or additional authentication is required.',\n        technicalDetails: error.message,\n        actionRequired: 'Please sign in again to continue.'\n      };\n    }\n    // Network error\n    else if (error.name === 'BrowserAuthError' && error.message.includes('network')) {\n      errorInfo = {\n        type: AuthErrorType.Network,\n        message: 'A network error occurred during authentication.',\n        technicalDetails: error.message,\n        actionRequired: 'Please check your internet connection and try again.'\n      };\n    }\n    // Permissions error\n    else if (error.message.includes('AADSTS65001') || error.message.includes('consent')) {\n      errorInfo = {\n        type: AuthErrorType.Permissions,\n        message: 'You don\\'t have permission to access this application.',\n        technicalDetails: error.message,\n        actionRequired: 'Please contact your administrator to request access.'\n      };\n    }\n  }\n  // Handle network errors\n  else if (error instanceof TypeError && error.message.includes('NetworkError')) {\n    errorInfo = {\n      type: AuthErrorType.Network,\n      message: 'Unable to connect to the authentication service.',\n      technicalDetails: error.message,\n      actionRequired: 'Please check your internet connection and try again.'\n    };\n  }\n  // Handle timeout errors\n  else if (error.name === 'TimeoutError' || (error.message && error.message.includes('timeout'))) {\n    errorInfo = {\n      type: AuthErrorType.Timeout,\n      message: 'The authentication request timed out.',\n      technicalDetails: error.message,\n      actionRequired: 'Please try again. If the problem persists, check your internet connection.'\n    };\n  }\n  \n  return errorInfo;\n};\n```\n\nCreate an error display component:\n\n```typescript\n// src/components/auth/AuthErrorDisplay.tsx\nimport React from 'react';\nimport { AuthErrorInfo, AuthErrorType } from '../../auth/authErrorHandler';\nimport './AuthErrorDisplay.css';\n\ninterface AuthErrorDisplayProps {\n  error: AuthErrorInfo;\n  onRetry?: () => void;\n  onDismiss?: () => void;\n  showTechnicalDetails?: boolean;\n}\n\nconst AuthErrorDisplay: React.FC<AuthErrorDisplayProps> = ({\n  error,\n  onRetry,\n  onDismiss,\n  showTechnicalDetails = false\n}) => {\n  // Determine icon based on error type\n  const getErrorIcon = () => {\n    switch (error.type) {\n      case AuthErrorType.Network:\n        return '';\n      case AuthErrorType.Permissions:\n        return '';\n      case AuthErrorType.UserCancelled:\n        return '';\n      case AuthErrorType.Timeout:\n        return '';\n      case AuthErrorType.Interaction:\n        return '';\n      default:\n        return '';\n    }\n  };\n\n  return (\n    <div className={`auth-error auth-error-${error.type}`}>\n      <div className=\"auth-error-header\">\n        <span className=\"auth-error-icon\">{getErrorIcon()}</span>\n        <h3 className=\"auth-error-title\">{error.message}</h3>\n        {onDismiss && (\n          <button \n            className=\"auth-error-dismiss\" \n            onClick={onDismiss}\n            aria-label=\"Dismiss error\"\n          >\n            \n          </button>\n        )}\n      </div>\n      \n      <div className=\"auth-error-content\">\n        <p className=\"auth-error-action\">{error.actionRequired}</p>\n        \n        {showTechnicalDetails && error.technicalDetails && (\n          <details className=\"auth-error-details\">\n            <summary>Technical details</summary>\n            <code>{error.technicalDetails}</code>\n          </details>\n        )}\n        \n        {onRetry && (\n          <button \n            className=\"auth-error-retry\" \n            onClick={onRetry}\n          >\n            Try Again\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AuthErrorDisplay;\n```\n\nAdd the corresponding CSS:\n\n```css\n/* src/components/auth/AuthErrorDisplay.css */\n.auth-error {\n  margin: 16px 0;\n  border-radius: 4px;\n  overflow: hidden;\n  border-left: 4px solid #f44336;\n  background-color: #fff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.auth-error-header {\n  display: flex;\n  align-items: center;\n  padding: 12px 16px;\n  background-color: #ffebee;\n}\n\n.auth-error-icon {\n  font-size: 20px;\n  margin-right: 12px;\n}\n\n.auth-error-title {\n  flex: 1;\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #d32f2f;\n}\n\n.auth-error-dismiss {\n  background: none;\n  border: none;\n  font-size: 20px;\n  color: #757575;\n  cursor: pointer;\n  padding: 0 4px;\n}\n\n.auth-error-content {\n  padding: 12px 16px;\n}\n\n.auth-error-action {\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  color: #424242;\n}\n\n.auth-error-details {\n  margin-top: 12px;\n  font-size: 13px;\n}\n\n.auth-error-details summary {\n  cursor: pointer;\n  color: #757575;\n  margin-bottom: 8px;\n}\n\n.auth-error-details code {\n  display: block;\n  padding: 8px;\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  overflow-x: auto;\n  font-family: monospace;\n  font-size: 12px;\n  color: #d32f2f;\n}\n\n.auth-error-retry {\n  margin-top: 12px;\n  padding: 8px 16px;\n  background-color: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.auth-error-retry:hover {\n  background-color: #e0e0e0;\n}\n\n/* Error type specific styles */\n.auth-error-network {\n  border-left-color: #2196f3;\n}\n\n.auth-error-network .auth-error-header {\n  background-color: #e3f2fd;\n}\n\n.auth-error-network .auth-error-title {\n  color: #1976d2;\n}\n\n.auth-error-permissions {\n  border-left-color: #ff9800;\n}\n\n.auth-error-permissions .auth-error-header {\n  background-color: #fff3e0;\n}\n\n.auth-error-permissions .auth-error-title {\n  color: #f57c00;\n}\n\n.auth-error-userCancelled {\n  border-left-color: #9e9e9e;\n}\n\n.auth-error-userCancelled .auth-error-header {\n  background-color: #f5f5f5;\n}\n\n.auth-error-userCancelled .auth-error-title {\n  color: #616161;\n}\n\n.auth-error-timeout {\n  border-left-color: #ff5722;\n}\n\n.auth-error-timeout .auth-error-header {\n  background-color: #fbe9e7;\n}\n\n.auth-error-timeout .auth-error-title {\n  color: #e64a19;\n}\n```\n\nUpdate the login page to use the error handler:\n\n```typescript\n// Update LoginPage.tsx\nimport { handleAuthError } from '../auth/authErrorHandler';\nimport AuthErrorDisplay from '../components/auth/AuthErrorDisplay';\n\n// Inside the LoginPage component\nconst [authErrorInfo, setAuthErrorInfo] = useState<AuthErrorInfo | null>(null);\n\n// Replace the existing error handling with:\nconst handleLoginError = (error: any) => {\n  const errorInfo = handleAuthError(error);\n  setAuthErrorInfo(errorInfo);\n};\n\n// Replace the existing error display with:\n{authErrorInfo && (\n  <AuthErrorDisplay\n    error={authErrorInfo}\n    onRetry={() => {\n      setAuthErrorInfo(null);\n      // Attempt login again\n    }}\n    onDismiss={() => setAuthErrorInfo(null)}\n    showTechnicalDetails={process.env.NODE_ENV === 'development'}\n  />\n)}\n```",
      "testStrategy": "1. Test error handling for various authentication error scenarios\n2. Verify that error messages are user-friendly and provide clear guidance\n3. Test the retry functionality for recoverable errors\n4. Verify that technical details are only shown in development mode\n5. Test the error component with different error types to ensure proper styling\n6. Verify that error messages are accessible and meet WCAG standards\n7. Test error dismissal functionality\n8. Verify integration with the login page and other authentication flows",
      "priority": "medium",
      "dependencies": [
        2,
        3,
        5
      ],
      "status": "pending",
      "subtasks": []
    }
  ]
}